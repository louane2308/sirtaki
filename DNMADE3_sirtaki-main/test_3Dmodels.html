<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

		<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
		<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
		<script>
			AFRAME.registerComponent('model_test', {
				schema: {
					  audio: {type: 'string', default: ''},
					  delai: {type: 'number', default: 1000},
					  animdata: {type: 'string', default: ''},
				},
	            init: function() {
	                var el = this.el;
					const selectModel = document.querySelector('#idModel');
				    const selectAction = document.querySelector('#idAction');
				    selectModel.addEventListener('change', (event) => {
				        console.log(">>>> new model3D = "+event.target.value);
						el.removeAttribute('gltf-model');
				        el.setAttribute('gltf-model', event.target.value);
						var data = "clip: idle; crossFadeDuration: 0.3; timeScale: 0.5;";
						selectAction.value = ""
						el.removeAttribute('animation-mixer');
						el.setAttribute('animation-mixer', data);

				    });
				    selectAction.addEventListener('change', (event) => {
						var data = "clip: "+event.target.value+"; crossFadeDuration: 0.3; timeScale: 0.5;";
						// var data = "clip: "+event.target.value+";";
						console.log(">>>> new action = "+data);
						el.removeAttribute('animation-mixer');
				    el.setAttribute('animation-mixer', data);
				    });
	            }
	        });
		</script>
		<style>
		  #idModel { position: absolute; left: 10px; bottom: 10px;}
		  #idAction { position: absolute; left: 100px; bottom: 10px;}
		</style>
  </head>

  <body style='margin : 0px; overflow: hidden;'>
		<a-scene background="color: skyblue">
			<a-assets>
    			<a-asset-item id="glbAlizee" src="./assets/models/alizee_leo.glb"></a-asset-item>
    			<a-asset-item id="glbAntoine" src="./assets/models/antoine_hugo.glb"></a-asset-item>
    			<a-asset-item id="glbCecile" src="./assets/models/cecile_genia.glb"></a-asset-item>
    			<a-asset-item id="glbCome" src="./assets/models/come_adrien.glb"></a-asset-item>
    			<a-asset-item id="glbGenia" src="./assets/models/genia_cecile.glb"></a-asset-item>
    			<a-asset-item id="glbLeo" src="./assets/models/leo_alizee.glb"></a-asset-item>
    			<a-asset-item id="glbLoic" src="./assets/models/loic_marion.glb"></a-asset-item>
    			<a-asset-item id="glbMartin" src="./assets/models/martin_tom.glb"></a-asset-item>
          <a-asset-item id="glbHugo" src="./assets/models/hugo_antoine.glb"></a-asset-item>
					<a-asset-item id="glbAdrien" src="./assets/models/adrien_come.glb"></a-asset-item>
					<a-asset-item id="glbJasmine" src="./assets/models/jasmine_louane.glb"></a-asset-item>
				<!-- <a-asset-item id="glbLaurine" src="./assets/models/laurine_kilian.glb"></a-asset-item> -->
			  	<a-asset-item id="glbMarion" src="./assets/models/marion_loic.glb"></a-asset-item>
				<!-- <a-asset-item id="glbTom" src="./assets/models/tom_martin.glb"></a-asset-item> -->
			  	<a-asset-item id="glbJasmine" src="./assets/models/jasmine_louane.glb"></a-asset-item>
            </a-assets>

			<a-entity  id ="model3D"
					   position="-1 0 -4"
					   gltf-model="#glbAlizee"
					   rotation="90 0 90"
					   scale="1 1 1"
					   model_test
					   animation-mixer="clip: ready; crossFadeDuration: 0.3; timeScale: 2;">
            </a-entity>

    	</a-scene>

		<select id="idModel">
			<option value="./assets/models/adrien_come.glb">Adrien</option>
	  	<option value="./assets/models/alizee_leo.glb">Alizée</option>
	  	<option value="./assets/models/antoine_hugo.glb">Antoine</option>
			<option value="./assets/models/cecile_genia.glb">Cécile</option>
			<option value="./assets/models/come_adrien.glb">Côme</option>
	  	<option value="./assets/models/genia_cecile.glb">Génia</option>
	  	<option value="./assets/models/hugo_antoine.glb">Hugo</option>
	  	<option value="./assets/models/jasmine_louane.glb">Jasmine</option>
	    <option value="./assets/models/killian_laurine.glb">Killian</option>
	  	    <!-- <option value="./assets/models/laurine_kilian.glb">Laurine</option> -->
	  	<option value="./assets/models/leo_alizee.glb">Léo</option>
			<option value="./assets/models/loic_marion.glb">Loïc</option>
	  	<option value="./assets/models/louane_jasmine.glb">Louane</option>
			<option value="./assets/models/marion_loic.glb">Marion</option>
	  	<option value="./assets/models/martin_tom.glb">Martin</option>
	  	    <!-- <option value="./assets/models/tom_martin.glb">Tom</option> -->
  	  	</select>
		<select id="idAction">
			<option value="idle">idle</option>
			<option value="ready">ready</option>
			<option value="pas_01">pas_01</option>
			<option value="pas_02">pas_02</option>
			<option value="pas_03">pas_03</option>
			<option value="pas_04">pas_04</option>
			<option value="pas_05">pas_05</option>
		</select>

  </body>
</html>
